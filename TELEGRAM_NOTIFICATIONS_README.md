# Telegram Order Notifications - ุฏููู ุงูุฅุนุฏุงุฏ ูุงูุงุณุชุฎุฏุงู

ูุธุงู ุฅุดุนุงุฑุงุช Telegram ุจุณูุท ููุนุงู ูุฅุฑุณุงู ุฅุดุนุงุฑุงุช ููุฑูุฉ ุนูุฏ ุฅูุดุงุก ุทูุจุงุช ุฌุฏูุฏุฉ.

## ๐ ููุงุฐุง Telegramุ

- โ **ุฃุณูู ูู ุงูุฅุนุฏุงุฏ** - ูุง ุญุงุฌุฉ ูู Business Account ุฃู ููุงููุงุช
- โ **ูุฌุงูู ุชูุงูุงู** - ุจุฏูู ูููุฏ ุนูู ุนุฏุฏ ุงูุฑุณุงุฆู
- โ **ุณุฑูุน ูููุซูู** - ุชุณููู ููุฑู ุจุฏูู ุชุฃุฎูุฑ
- โ **API ุจุณูุท** - ุณูู ุงูุงุณุชุฎุฏุงู ูุงูุตูุงูุฉ
- โ **ุฅุดุนุงุฑุงุช ููุฑูุฉ** - ุชุตู ูููุงุชู ูุจุงุดุฑุฉ

---

## ๐ ุงูุฅุนุฏุงุฏ ุงูุณุฑูุน

### 1. ุฅูุดุงุก Bot ูู Telegram

#### ุงูุฎุทูุงุช:

1. **ุงูุชุญ Telegram** ุนูู ูุงุชูู ุฃู ุงูููุจููุชุฑ
2. **ุงุจุญุซ ุนู** `@BotFather`
3. **ุงุจุฏุฃ ูุญุงุฏุซุฉ** ูุงุถุบุท `/start`
4. **ุฃูุดุฆ Bot ุฌุฏูุฏ:**
   - ุงูุชุจ: `/newbot`
   - ุฃุฏุฎู ุงุณู Bot (ูุซุงู: `ููุฑุฉ ุงุณุชูุฑ Bot`)
   - ุฃุฏุฎู username ููู Bot (ูุฌุจ ุฃู ููุชูู ุจู `bot`ุ ูุซุงู: `fekra_store_bot`)
5. **ุงูุณุฎ ุงูู Token** ุงูุฐู ุณูุฑุณูู BotFather
   - ุณูููู ุจูุฐุง ุงูุดูู: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`

### 2. ุงูุญุตูู ุนูู Chat ID

#### ุทุฑููุฉ 1: ุจุงุณุชุฎุฏุงู Bot ุฎุงุต

1. **ุงุจุญุซ ุนู** `@userinfobot` ูู Telegram
2. **ุงุจุฏุฃ ูุญุงุฏุซุฉ** ูุงุถุบุท `/start`
3. **ุณูุฑุณู ูู Chat ID** ุงูุฎุงุต ุจู
4. **ุงูุณุฎู** (ุณูููู ุฑูู ูุซู: `123456789`)

#### ุทุฑููุฉ 2: ูู ุงููุฌููุนุฉ (ููุฅุฑุณุงู ููุฌููุนุฉ)

1. **ุฃูุดุฆ ูุฌููุนุฉ** ุฌุฏูุฏุฉ ุฃู ุงุณุชุฎุฏู ููุฌูุฏุฉ
2. **ุฃุถู Bot ุงูุฎุงุต ุจู** ูููุฌููุนุฉ
3. **ุงุฌุนู Bot Admin** ูู ุงููุฌููุนุฉ
4. **ุงูุชุญ ุงููุชุตูุญ** ูุงุฐูุจ ุฅูู:
   ```
   https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
   ```
5. **ุงุจุญุซ ุนู** `"chat":{"id":` ูุณุชุฌุฏ Chat ID ูููุฌููุนุฉ
6. **ุงูุณุฎ ุงูุฑูู** (ุณูุจุฏุฃ ุจู `-` ูููุฌููุนุงุชุ ูุซู: `-987654321`)

### 3. ุชูููู ุงููุชุบูุฑุงุช

ุงูุชุญ `.env` ูุฃุถู:

```bash
# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_RECIPIENTS=123456789,-987654321
```

**ููุงุญุธุงุช:**
- ููููู ุฅุถุงูุฉ ุนุฏุฉ Chat IDs ููุตููุฉ ุจููุงุตู
- ูุฅุฑุณุงู ูุดุฎุต: ุงุณุชุฎุฏู Chat ID ุงูุฅูุฌุงุจู
- ูุฅุฑุณุงู ููุฌููุนุฉ: ุงุณุชุฎุฏู Chat ID ุงูุณุงูุจ (ูุจุฏุฃ ุจู `-`)

---

## ๐ฑ ุดูู ุงูุฑุณุงูุฉ

ุนูุฏ ุฅูุดุงุก ุทูุจ ุฌุฏูุฏุ ุณุชุตู ุฑุณุงูุฉ ุจูุฐุง ุงูุดูู:

```
๐ ุทูุจ ุฌุฏูุฏ ูู ููุฑุฉ ุณุชูุฑ! ๐

ุฑูู ุงูุทูุจ: 42
ุฅุฌูุงูู ุงููุจูุบ: 450 ุฌ.ู
ุงุณู ุงูุนููู: ุฃุญูุฏ ูุญูุฏ

[ุฒุฑ: ุนุฑุถ ุงูุทูุจ] โ ููุชุญ ุตูุญุฉ ุงูุทูุจ ูู ููุญุฉ ุงูุชุญูู
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุชุดุบูู Queue Worker

```bash
php artisan queue:work --queue=high,default
```

### 2. ุฅูุดุงุก ุทูุจ ุชุฌุฑูุจู

**ูู ุงููููุน:**
- ุงูุชุญ ุงููุชุฌุฑ
- ุงุฎุชุฑ ููุชุฌ
- ุงุถุบุท "ุงุทูุจ ุงูุขู"
- ุงููุฃ ุงูุจูุงูุงุช ูุงุถุบุท "ุชุฃููุฏ"

**ูู Tinker:**
```bash
php artisan tinker

$product = \App\Models\Product::first();
\App\Models\Order::create([
    'product_id' => $product->id,
    'quantity' => 2,
    'customer_name' => 'ุฃุญูุฏ ูุญูุฏ - ุงุฎุชุจุงุฑ Telegram',
    'phone' => '01234567890',
    'address' => 'ุงููุงูุฑุฉ',
    'governorate' => 'ุงููุงูุฑุฉ',
    'status' => 'pending'
]);
```

### 3. ุงูุชุญูู

- โ ุงูุชุญ Telegram
- โ ูุฌุจ ุฃู ุชุตู ุฑุณุงูุฉ ููุฑูุฉ ูู Bot ุงูุฎุงุต ุจู
- โ ุงุถุบุท ุฒุฑ "ุนุฑุถ ุงูุทูุจ" ููุชุฃูุฏ ูู ุงูุฑุงุจุท

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุฑุณุงุฆู ูุง ุชุตู

**ุงูุญููู:**

1. **ุชุญูู ูู Bot Token:**
   ```bash
   # ุงุฎุชุจุฑ Token ุนุจุฑ Curl
   curl -X GET "https://api.telegram.org/bot<YOUR_TOKEN>/getMe"
   ```
   ุฅุฐุง ูุงู Token ุตุญูุญุ ุณุชุญุตู ุนูู ูุนูููุงุช Bot

2. **ุชุญูู ูู Chat ID:**
   ```bash
   # ุฃุฑุณู ุฑุณุงูุฉ ุงุฎุชุจุงุฑ
   curl -X POST "https://api.telegram.org/bot<YOUR_TOKEN>/sendMessage" \
        -d "chat_id=<YOUR_CHAT_ID>" \
        -d "text=ุงุฎุชุจุงุฑ"
   ```

3. **ุชุญูู ูู Queue Worker:**
   ```bash
   ps aux | grep "queue:work"
   ```

4. **ุฑุงุฌุน Logs:**
   ```bash
   tail -f storage/logs/laravel.log | grep -i telegram
   ```

### ุงููุดููุฉ: Bot ูุง ูุณุชุทูุน ุงูุฅุฑุณุงู ูููุฌููุนุฉ

**ุงูุญู:**
- ุชุฃูุฏ ุฃู Bot ุนุถู ูู ุงููุฌููุนุฉ
- ุงุฌุนู Bot **Admin** ูู ุงููุฌููุนุฉ
- ุงุณุชุฎุฏู Chat ID ุงูุณุงูุจ (ูุจุฏุฃ ุจู `-`)

### ุงููุดููุฉ: ุงูุฑุงุจุท ูุง ูุนูู

**ุงูุญู:**
- ุชุฃูุฏ ูู ุฃู `APP_URL` ูู `.env` ุตุญูุญ
- ุชุฃูุฏ ูู ุชุดุบูู ุงูุณูุฑูุฑ

---

## ๐ ุงููุฑุงูุจุฉ

### ุนุฑุถ Logs:

```bash
# ุฌููุน logs Telegram
tail -f storage/logs/laravel.log | grep Telegram

# logs ุงููุฌุงุญ ููุท
tail -f storage/logs/laravel.log | grep "Telegram notification sent successfully"

# logs ุงูุฃุฎุทุงุก ููุท
tail -f storage/logs/laravel.log | grep "Telegram notification failed"
```

### ุงูุฅุญุตุงุฆูุงุช:

```bash
php artisan tinker

# ุนุฏุฏ ุงูุทูุจุงุช ุงูููู
\App\Models\Order::whereDate('created_at', today())->count();

# ุขุฎุฑ 5 ุทูุจุงุช
\App\Models\Order::latest()->take(5)->get(['id', 'customer_name', 'created_at']);
```

---

## ๐ฏ ุงููููุฒุงุช

| ุงูููุฒุฉ | ุงููุตู |
|--------|-------|
| **Queued** | ูุง ูุคุซุฑ ุนูู ุณุฑุนุฉ ุงููููุน |
| **Multi-recipient** | ุฅุฑุณุงู ูุนุฏุฉ ุฃุดุฎุงุต/ูุฌููุนุงุช |
| **Retry Logic** | 3 ูุญุงููุงุช ุชููุงุฆูุฉ ุนูุฏ ุงููุดู |
| **Rich Formatting** | Markdown ู Bold ู Italic |
| **Action Buttons** | ุฃุฒุฑุงุฑ ุชูุงุนููุฉ ูู ุงูุฑุณุงุฆู |
| **Logging** | ุณุฌู ูุงูู ููู ุนูููุฉ |

---

## ๐ง ุงูุชุฎุตูุต

### ุชุบููุฑ ุดูู ุงูุฑุณุงูุฉ

ุนุฏูู ููู: `app/Notifications/NewOrderTelegram.php`

```php
$message = "๐ *ุทูุจ ุฌุฏูุฏ ูู ููุฑุฉ ุณุชูุฑ!* ๐\n\n";
$message .= "*ุฑูู ุงูุทูุจ:* {$orderId}\n";
$message .= "*ุฅุฌูุงูู ุงููุจูุบ:* {$totalPrice}\n";
$message .= "*ุงุณู ุงูุนููู:* {$customerName}";
```

### ุฅุถุงูุฉ ูุนูููุงุช ุฅุถุงููุฉ

```php
$message .= "\n*ุฑูู ุงููุงุชู:* {$this->order->phone}\n";
$message .= "*ุงูุนููุงู:* {$this->order->address}\n";
$message .= "*ุงููุญุงูุธุฉ:* {$this->order->governorate}";
```

### ุชุบููุฑ ุงููุต ุนูู ุงูุฒุฑ

```php
->button('๐ ุนุฑุถ ุงูุชูุงุตูู', $url)
// ุฃู
->button('๐ฆ ูุนุงูุฌุฉ ุงูุทูุจ', $url)
```

---

## ๐ ุงูููุงุฑูุฉ ูุน WhatsApp

| ุงูููุฒุฉ | Telegram | WhatsApp |
|--------|----------|----------|
| **ุงูุฅุนุฏุงุฏ** | 5 ุฏูุงุฆู โ | 30+ ุฏูููุฉ โ |
| **ุงูุชูููุฉ** | ูุฌุงูู โ | ูุฌุงูู ุจุญุฏูุฏ โ๏ธ |
| **ุงูููุงููุงุช** | ูุง ููุฌุฏ โ | Templates ุชุญุชุงุฌ ููุงููุฉ โ |
| **ุนุฏุฏ ุงูุฑุณุงุฆู** | ุบูุฑ ูุญุฏูุฏ โ | 250-1000/ููู โ๏ธ |
| **ุณูููุฉ API** | ุจุณูุท ุฌุฏุงู โ | ูุนูุฏ โ |
| **ุงูุฃุฒุฑุงุฑ ุงูุชูุงุนููุฉ** | ูุฏุนูู โ | ูุญุฏูุฏ โ๏ธ |
| **Business Account** | ุบูุฑ ูุทููุจ โ | ูุทููุจ โ |

---

## ๐ ุงููููุงุช ุงููุชุฃุซุฑุฉ

### ุชู ุฅูุดุงุคูุง:
- โ `app/Notifications/NewOrderTelegram.php`
- โ `app/Listeners/SendOrderTelegramNotification.php`

### ุชู ุชุญุฏูุซูุง:
- โ `config/services.php` - ุฅุนุฏุงุฏุงุช Telegram
- โ `.env` - ูุชุบูุฑุงุช ุงูุจูุฆุฉ
- โ `.env.example` - ูุซุงู ูููุชุบูุฑุงุช
- โ `app/Providers/AppServiceProvider.php` - ุชุณุฌูู Listener

### ุชู ุญุฐููุง:
- โ `app/Services/WhatsAppService.php`
- โ `app/Listeners/SendOrderPlacedWhatsApp.php`

---

## ๐ ุฑูุงุจุท ูููุฏุฉ

- **Telegram Bot API Docs:** https://core.telegram.org/bots/api
- **BotFather:** https://t.me/BotFather
- **Package Docs:** https://github.com/laravel-notification-channels/telegram
- **Laravel Notifications:** https://laravel.com/docs/notifications

---

## โจ ุงูุฎูุงุตุฉ

ูุธุงู Telegram ุฃุจุณุท ุจูุซูุฑ ูู WhatsApp ููููุฑ ููุณ ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ:
- โ ุฅุดุนุงุฑุงุช ููุฑูุฉ
- โ ุฃุฒุฑุงุฑ ุชูุงุนููุฉ
- โ ุฅุฑุณุงู ูุนุฏุฉ ูุณุชูููู
- โ ุจุฏูู ุชูุงููู ุฃู ูููุฏ

**ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ูู ุจุฅุนุฏุงุฏ Bot ุงูุขู ูุงุจุฏุฃ ูู ุงุณุชูุจุงู ุงูุฅุดุนุงุฑุงุช ๐**

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 21 ุฃูุชูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 2.0.0  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุฅูุชุงุฌ
